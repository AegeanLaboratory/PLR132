# 2η Εργασία

Η δεύτερη εργασία εξετάζει την ικανότητά σας στην τµηµατοποίηση ενός **έτοιµου** προγράµµατος ώστε να υλοποιηθεί µε χρήση συναρτήσεων.

Το πρόγραµµα που υπάρχει στο πηγαίο αρχείο `2_kodikas.c` (φαίνεται παρακάτω) υπολογίζει την ηµέρα µιας συγκεκριµένης ηµεροµηνίας που δίνει ο χρήστης. Το πρόγραµµα υλοποιεί τον αλγόριθµο του Zeller (1822-1899) και υπολογίζει την ηµέρα µιας συγκεκριµένης ηµεροµηνίας µε τον ακόλουθο τρόπο:

```c
#include <stdio.h>
#define ONOMA "Onomatepwnymo"
#define USER_NAME "ctxxxxx"

int main()
{
    int A, B1, B2, B3, C, D, X, S, H, M, E;
    int disekto;
    printf("\n");
    printf("##############################################\n");
    printf(ONOMA);
    printf("\n");
    printf(USER_NAME);
    printf("\n");
    printf("----------------------------------------------\n");

    do
    {
    printf("Dose imerominia:");
    scanf("%d-%d-%d", &H, &M, &E);
    if (H == 0) break;
    A = 365 * (E - 1);
    B1 = (E - 1) / 4;
    B2 = -(E - 1) / 100;
    B3 = (E - 1) / 400;
    C = (367 * M - 362) / 12;
    if ((E % 4 == 0 && E % 100 != 0) || E % 400 == 0)
        disekto = 1;
    else
        disekto = 0;
    if (M <= 2)
        D = 0;
    else if (M > 2 && disekto)
        D = -1;
    else
        D = -2;
    S = A + B1 + B2 + B3 + C + D + H;
    X = S % 7;
    if (X == 0) printf("Stis %d/%d/%d i imera einai Kyriaki\n", H, M, E);
    else if (X == 1) printf("Stis %d/%d/%d i imera einai Deytera\n", H, M, E);
    else if (X == 2) printf("Stis %d/%d/%d i imera einai Triti\n", H, M, E);
    else if (X == 3) printf("Stis %d/%d/%d i imera einai Tetarti\n", H, M, E);
    else if (X == 4) printf("Stis %d/%d/%d i imera einai Pempti\n", H, M, E);
    else if (X == 5) printf("Stis %d/%d/%d i imera einai Paraskeyi\n", H, M, E);   
    else printf("Stis %d/%d/%d i imera einai Savato\n", H, M, E);
    printf("====================================================\n");
    } while (H != 0);
    return 0;
}
```

Προκειµένου να βρούµε ποια µέρα της εβδοµάδας αντιστοιχεί σε µια δοθείσα ηµεροµηνία Η/M/E (**H** ηµέρα, **M** µήνας, **E** έτος) υπολογίζουµε το άθροισµα Σ=A+B1+B2+B3+Γ+Δ+Η όπου:

- Α = 365 * (Ε - 1)
- Β1 = (Ε - 1) div 4 &rarr; Το **div** υποδηλώνει ακέραια διαίρεση. Στη C η ακέραια διαίρεση γίνεται κανονικά µε τον τελεστή / αρκεί τα µέλη του να είναι ακέραια (π.χ 5/2 έχει ως αποτέλεσµα 2).
- Β2 = – (Ε - 1) div 100
- Β3 = (Ε - 1) div 400
- Γ = (367 * Μ - 362) div 12

η δε τιµή του **Δ** είναι:

- `0` αν Μ<=2
- `-1` αν Μ>2 και το έτος Ε είναι **δίσεκτο** και
- `-2` σε κάθε άλλη περίπτωση

Για τον υπολογισµό του Δ υπενθυµίζουµε ότι δίσεκτα είναι τα έτη που διαιρούνται ακριβώς µε το 4 και δεν διαιρούνται ακριβώς µε το 100. Επίσης δίσεκτα είναι τα έτη που διαιρούνται ακριβώς µε το 400.

Η ζητούµενη µέρα προκύπτει από τον ακέραιο αριθµό Χ = Σ % 7 (στη C ο τελεστής % υποδηλώνει το υπόλοιπο µιας ακέραιας διαίρεσης). Το αποτέλεσµα θα είναι ένας ακέραιος αριθµός από το 0 µέχρι το 6 όπου το 0 αντιστοιχεί στην Κυριακή, το 1 στη Δευτέρα, κ.ο.κ.

Παράδειγµα: Για την ηµεροµηνία 25/12/1996 (H=25, M=12, E=1996) προκύπτει:

Α=728175, Β1=498, Β2=-19, Β3=4, Γ=336, Δ=-1, Σ=729018 και Χ=3 εποµένως ηµέρα Τετάρτη.

Το πρόγραµµα **2_kodikas.c** ζητάει µια ηµεροµηνία στη µορφή:

`Dose imerominia:23-3-2013`

και εµφανίζει την ηµέρα της εβδοµάδας ως ακολούθως:

`H imera stis 23/3/2013 einai Savato`

Το πρόγραµµα έχει επαναληπτική λειτουργία. Δηλαδή µε το που εµφανίζει την ηµέρα για κάποια ηµεροµηνία ζητάει την επόµενη κ.ο.κ. Η επαναληπτική διαδικασία σταµατάει όταν στην ηµεροµηνία για ηµέρα δώσουµε 0 (π.χ 0-3-2012). Το πρόγραµµα επίσης εµφανίζει στην αρχή τα στοιχεία µας.

Το πρώτο που πρέπει να κάνετε είναι να τρέξετε το πρόγραµµα που σας δόθηκε, να δείτε ότι δουλεύει, να το **µελετήστε** ΠΡΟΣΕΚΤΙΚΑ και να κατανοήστε **πλήρως** τη λειτουργία του.

**ΠΡΟΣΟΧΗ** δεν θα πρέπει να φτιάξετε άλλο πρόγραµµα αλλά να τροποποιήστε το πρόγραµµα `2_kodikas.c` ώστε ορισµένες από τις λειτουργίες του να υλοποιούνται από **συναρτήσεις**. Συγκεκριµένα θα πρέπει να ακολουθήστε τα παρακάτω βήµατα:

## 1o βήμα

Φτιάξτε µια συνάρτηση η οποία θα **εµφανίζει τα στοιχεία** του φοιτητή (τα δικά σας δηλαδή) στην οθόνη µε τον ίδιο ακριβώς τρόπο όπως το υπάρχον πρόγραµµα. Η συνάρτηση θα υλοποιεί το παρακάτω τµήµα του κώδικα.

```c
printf("\n");
printf("##############################################\n");
printf(ONOMA);
printf("\n");
printf(USER_NAME);
printf("----------------------------------------------\n"); 
```

## 2o βήμα

Μέσα στη `main()` καλέστε τη συνάρτηση που φτιάξατε στο 1ο βήµα ώστε τα στοιχεία σας να τα εµφανίζει η συγκεκριµένη συνάρτηση και όχι η `main()`. Φυσικά θα πρέπει να αφαιρέστε και να προσαρµόστε το τµήµα που υλοποιούσε αυτή τη λειτουργία στη `main()`.

## 3o βήμα

Καταστρώστε µία συνάρτηση η οποία θα δέχεται ως παράµετρο ένα έτος. Η συνάρτηση θα πρέπει να **επιστρέφει ως τιµή** το 1, στη περίπτωση που το έτος είναι δίσεκτο και το 0 αν είναι κανονικό. Η συνάρτηση θα υλοποιεί το παρακάτω τµήµα του κώδικα.

```c
if ((E % 4 == 0 && E % 100 != 0) || E % 400 == 0)
    disekto = 1;
else
    disekto = 0;
```

## 4o βήμα

Καταστρώστε µία συνάρτηση η οποία θα δέχεται ως παραµέτρους τρεις ακέραιους αριθµούς: τον αριθµό της ηµέρας (Η), του µήνα (Μ) και του έτους (Ε). Η συνάρτηση θα πρέπει να **επιστρέφει ως τιµή** τον αριθµό της ηµέρας της εβδοµάδας (X). Η συνάρτηση θα υλοποιεί το παρακάτω τµήµα του κώδικα. Η συνάρτηση θα πρέπει να καλεί τη συνάρτηση του βήµατος 3 για να ελέγχει αν ένα έτος είναι δίσεκτο ή όχι.

```c
A = 365 * (E - 1);
B1 = (E-1) / 4;
B2 = -(E - 1) / 100;
B3 = (E - 1) / 400;
C = (367 * M - 362) / 12;

if (M <= 2)
    D = 0;
else if (M > 2 && disekto)
    D = -1;
else
    D = -2;

S = A + B1 + B2 + B3 + C + D + H;
X = S % 7;
```

## 5ο Βήμα

Χρησιµοποιήστε τη συνάρτηση που φτιάξατε στο 4ο βήµα ώστε να την **καλείτε** από τη `main()` για τον υπολογισµό της ηµέρας (Χ). Φυσικά θα πρέπει να αφαιρέστε και να προσαρµόστε το τµήµα που υλοποιούσε αυτή τη λειτουργία στη `main()`. Διαγράψτε επίσης όσες µεταβλητές της `main()` δεν χρειάζονται πια.

## 6ο Βήμα

Καταστρώστε µια συνάρτηση στην οποία θα µεταβιβάζεται ο  αριθµός της ηµέρας της εβδοµάδας που υπολογίσατε (Χ) και θα εµφανίζει στην οθόνη την ηµεροµηνία και τη σωστή ηµέρα ολογράφως (Deytera, Triti, κ.λπ). Στη συνάρτηση θα µεταβιβάζονται επίσης, η ηµέρα ο µήνας και το έτος. Η συνάρτηση θα υλοποιεί το παρακάτω τµήµα του κώδικα.

```c
if (X == 0) printf("Stis %d/%d/%d i imera einai Kyriaki\n", H, M, E);
else if (X == 1) printf("Stis %d/%d/%d i imera einai Deytera\n", H, M, E);
else if (X == 2) printf("Stis %d/%d/%d i imera einai Triti\n", H, M, E);
else if (X == 3) printf("Stis %d/%d/%d i imera einai Tetarti\n", H, M, E);
else if (X == 4) printf("Stis %d/%d/%d i imera einai Pempti\n", H, M, E);
else if (X == 5) printf("Stis %d/%d/%d i imera einai Paraskeyi\n", H, M, E);   
else printf("Stis %d/%d/%d i imera einai Savato\n", H, M, E);
printf("====================================================\n");
```

## 7ο Βήμα

Από τη `main()`, καλέστε τη συνάρτηση που φτιάξατε στο 6ο βήµα ώστε να εµφανίζεται η ηµέρα. Ανάλογα, θα πρέπει να αφαιρέστε και να προσαρµόστε το τµήµα που υλοποιούσε αυτή τη λειτουργία στη `main()`.

## 8ο Βήμα

Παρατηρήστε ότι στο πρόγραµµα αρκετές φορές εµφανίζεται µια γραµµή µε τον ίδιο χαρακτήρα. Π.χ µια γραµµή µε αστεράκια `*`, µια µε παύλες `-`, µια µε δίεση `#` κ.λ.π. Θέλουµε αυτή τη δουλειά να την κάνει µια παραµετρική συνάρτηση. Η συνάρτηση θα πρέπει να έχει δύο παραµέτρους: έναν ακέραιο αριθµό και έναν χαρακτήρα. Η συνάρτηση θα πρέπει να εµφανίζει τόσες φορές τον χαρακτήρα όσες η τιµή της ακέραιας παραµέτρου της. Στο τέλος να κάνει και µια αλλαγή γραµµής. Φτιάξτε µια τέτοια συνάρτηση.

## 9ο Βήμα

Σε διάφορα σηµεία του προγράµµατος, τόσο στη `main()` όσο και στις λοιπές συναρτήσεις, υπάρχει κώδικας ο οποίος εµφανίζει µια γραµµή µε τον ίδιο χαρακτήρα (π.χ. printf("#####\n"). **Αντικαταστήστε** τον συγκεκριµένο κώδικα (σε κάθε σηµείο του προγράµµατος) µε **κλήση της συνάρτησης** που φτιάξατε στο 8o βήµα ώστε να επιτελεί **ακριβώς** την ίδια λειτουργία.

Σε κάθε περίπτωση, το πρόγραµµα µετά από τη προσθήκη των συναρτήσεων, θα πρέπει να επιτελεί **ΑΚΡΙΒΩΣ** την ίδια λειτουργία µε αυτό που σας δόθηκε. Ο χρήστης δεν θα πρέπει να βλέπει **ΚΑΜΙΑ** διαφορά.

**ΠΡΟΣΟΧΗ δεν θα πρέπει να χρησιµοποιηθεί ΚΑΜΙΑ καθολική µεταβλητή.**

**Αποθηκεύστε** το πρόγραµµα σε ένα πηγαίο αρχείο µε όνοµα `2_ctxxxxx.c` (όπου ctxxxxx) το όνοµα χρήστη (user name) ενός φοιτητή της οµάδας (η εργασία αυτή πρέπει να γίνει ανά ζεύγη - δείτε τη τελευταία σελίδα). **Υποβάλτε** την εργασία σας µέσω του συστήµατος ηλεκτρονικής µάθησης **Moodle** µέσα στη ηµεροµηνία που προσδιορίζεται στη φόρµα της εργασίας και **ΟΧΙ** µε e-mail.

## Οδηγίες - συμβουλές

- Στο αρχείο `2_ kodikas.zip` υπάρχει ο πηγαίος κώδικας του προγράµµατος το οποίο θα τροποποιήσετε.
- **Μην στείλετε** πρόγραµµα που δεν µεταγλωττίζεται σωστά. Δεν θα ληφθεί καθόλου υπόψη.
- Το πρόγραµµα θα πρέπει να εµφανίζει τα **δικά σας στοιχεία**.
- Χρησιµοποιείστε **κλιµακωτή γραφή** ώστε το πρόγραµµα να είναι ευανάγνωστο.
- Ακολουθήστε τα βήµατα που αναφέρονται. Μετά από κάθε βήµα **δοκιµάζετε** το πρόγραµµα ώστε να δείτε αν δουλεύει σωστά µέχρι το σηµείο που φτάσατε.
- Χρησιµοποιείστε **διαφορετικά ονόµατα** µεταβλητών και παραµέτρων στις συναρτήσεις και στο κυρίως πρόγραµµα ώστε να αντιληφθείτε την µεταβίβαση παραµέτρων.
- Μην ξεχάστε τις **πρόσθιες δηλώσεις** των συναρτήσεων.
- Μελετήστε προσεκτικά τα **προγράµµατα των εργαστηρίων** και τα παραδείγµατα των διαλέξεων. Θα σας βοηθήσουν αρκετά!

Αν δεν µπορέσετε να ολοκληρώστε το πρόγραµµα, στείλτε το µέχρι το σηµείο που έχετε φτάσει. Ελπίζω να αντιληφθήκατε ότι δεν έχει κανένα νόηµα να σας κάνουν άλλοι τις εργασίες! Επαναλαµβάνω ότι η µόνη λύση είναι να ασχοληθείτε σοβαρά και αν έχετε δυσκολίες να µε ρωτήσετε και να σας βοηθήσω. Όλοι σχεδόν θα εξεταστείτε προφορικά επάνω στην εργασία που θα παραδώσετε!

## ΠΡΟΣΟΧΗ - ΠΡΟΣΟΧΗ

Αυτή η εργασία πρέπει να γίνει ανά ζεύγη φοιτητών. Κάθε οµάδα θα αποτελείται από δύο άτοµα.

Στην κορυφή του κώδικα του προγράµµατος πρέπει να υπάρχουν δυο γραµµές σχολίων µε τα ονόµατα και τους κωδικούς των µελών της οµάδας ως εξής:

```
// Onomatepwnymo1 ctxxxxx
// Onomatepwnymo2 ctxxxxx
```

Στη περίπτωση που δεν έχετε κάποιον να κάνετε µαζί την εργασία στείλτε µου mail και θα σας βρω εγώ.

ΠΡΟΣΟΧΗ: µια οµαδική εργασία δεν αποτελεί ευκαιρία για κάποιον που δεν έχει ασχοληθεί καθόλου να µετέχει σε µια εργασία, αλλά ευκαιρία να µάθει είτε µόνος του είτε από συναδέλφους του!

Αν δεν µπορέσετε να ολοκληρώστε το πρόγραµµα, στείλτε το µέχρι το σηµείο που έχετε φτάσει αρκεί να µεταγλωττίζεται σωστά.
