[![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Feffie375.github.io%2FTPTE-AEGEAN&count_bg=%23E3802B&title_bg=%2307359E&icon=internetarchive.svg&icon_color=%23E7E7E7&title=%CE%A0%CF%81%CE%BF%CE%B2%CE%BF%CE%BB%CE%AD%CF%82&edge_flat=false)](https://hits.seeyoufarm.com)

# Εργαστήριο 7

Το εργαστηριακό μάθημα αυτό είναι απο τη σημερινή παρουσίαση (05/04/2021) που μας έκανε ο κ. Νίκος Μ. Χατζηγιαννάκης (Πανεπιστήμιο ΑΙΓΑΙΟΥ). Το περιεχόμενο του 7ου εργαστηρίου είναι το εξής:

- Χρήση δεικτών
- Χρήση συµβολοσειρών µέσω δείκτη
- Μεταβίβαση δεικτών σε συναρτήσεις

## Άσκηση 7.1 – Χρήση Δεικτών

Τροποποιήστε το παρακάτω πρόγραµµα ακολουθώντας τα παρακάτω βήµατα.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;
    return 0;
}
```

### Βήμα 1

Μέσα στη συνάρτηση **main()** δηλώστε τρεις **δείκτες** τύπου **int** µε ονόµατα **p1**, **p2** και **p3**. Στον δείκτη **p1** καταχωρήστε τη **διεύθυνση** της µεταβλητής **b**, στον **p2** τη διεύθυνση της µεταβλητής **c** και στον **p3** τη διεύθυνση της µεταβλητής **d**.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    return 0;
}
```

### Βήμα 2

Με χρήση του δείκτη **p3** καταχωρήστε στη µεταβλητή **d** το 100. Στη πρόταση που θα γράψετε **δεν** πρέπει να αναφέρεται καθόλου το όνοµα της µεταβλητής d.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    return 0;
}
```

### Βήμα 3

Με χρήση του δείκτη **p1**, **αυξήστε** τη τιµή της µεταβλητής **b** κατά **ένα** και µε χρήση του δείκτη **p2** **µειώστε** τη τιµή της µεταβλητής **c** κατά **ένα**. Στις προτάσεις που θα γράψετε **δεν** πρέπει να αναφέρονται καθόλου τα ονόµατα των µεταβλητών b και c.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    return 0;
}
```

### Βήμα 4

**Χωρίς** να χρησιµοποιήστε τα ονόµατα των µεταβλητών **b**,**c** και **d**, γράψτε µία πρόταση η οποία να καταχωρίζει µέσα στη µεταβλητή d το **άθροισµα** των περιεχοµένων των µεταβλητών b και c.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    return 0;
}
```

### Βήμα 5

Με µία **printf** εµφανίστε τα περιεχόµενα των µεταβλητών b,c και d χρησιµοποιώντας τα **ονόµατα** τους. Γράψτε ακόµα µια **printf** η οποία θα εµφανίζει τα περιεχόµενα των µεταβλητών b,c και d χρησιµοποιώντας **µόνο** τους **δείκτες** p1, p2 και p3.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    return 0;
}
```

### Βήμα 6

∆ηλώστε µια µεταβλητή δείκτη τύπου **char** µε όνοµα **lex**. Μέσα στο δείκτη **lex** καταχωρήστε τη **συµβολοσειρά** "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINΟNIAS". Ουσιαστικά στον lex θα καταχωριστεί η διεύθυνση της πρώτης θέσης µνήµης στην οποία έχει καταχωριστεί η συµβολοσειρά.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    char *lex = "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINONIAS";

    return 0;
}
```

### Βήμα 7

Χρησιµοποιώντας το δείκτη **lex** εµφανίστε τη συµβολοσειρά µε τη συνάρτηση **puts**.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    char *lex = "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINONIAS";

    puts(lex);

    return 0;
}
```

### Βήμα 8

Χρησιµοποιώντας µε κατάλληλο τρόπο τον δείκτη **lex**, εµφανίστε µόνο τη **τελευταία** λέξη της συµβολοσειράς (το "EPIKOINONIAS").

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    char *lex = "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINONIAS";

    puts(lex);

    puts(lex + 35);

    return 0;
}
```

### Βήμα 9

Χρησιµοποιώντας µε κατάλληλο τρόπο τον δείκτη **lex**, εµφανίστε µόνο το **ένατο** γράµµα της συµβολοσειράς.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    char *lex = "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINONIAS";

    puts(lex);

    puts(lex + 35);

    putchar(*(lex+8));

    return 0;
}
```

### Βήμα 10

∆ηµιουργήστε µια **συνάρτηση** µε όνοµα **len()**, η οποία θα δέχεται ως παράµετρο ένα **δείκτη** τύπου **char**. Η συνάρτηση θα πρέπει να µετράει το **πλήθος** των χαρακτήρων ξεκινώντας από τον χαρακτήρα στον οποίο δείχνει ο δείκτης που της µεταβιβάστηκε µέχρι να εντοπίσει τον χαρακτήρα **τερµατισµού** '\0'. Η
συνάρτηση θα πρέπει να επιστρέφει ως **τιµή** το **πλήθος** των χαρακτήρων που **µέτρησε**.

```c
#include <stdio.h>
#include <stdlib.h>

int len(char *p);

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    char *lex = "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINONIAS";

    puts(lex);

    puts(lex + 35);

    putchar(*(lex+8));

    return 0;
}


int len(char *p)
{
    int counter = 0;

    while (*p != '\0')
    {
        counter++;
        p++;
    }

    return counter;
}
```

### Βήμα 11

Από τη main() καλέστε τη συνάρτηση **len()** µεταβιβάζοντας σε αυτή τον δείκτη **lex** και **εµφανίστε** τον **αριθµό** που επιστρέφει.

```c
#include <stdio.h>
#include <stdlib.h>

int len(char *p);

int main()
{
    int b = 5, c = 20, d;

    int *p1, *p2, *p3;

    p1 = &b;
    p2 = &c;
    p3 = &d;

    *p3 = 100;

    (*p1)++;
    (*p2)--;

    *p3 = *p1 + *p2;

    printf("b = %d, c = %d, d = %d\n", b, c, d);
    printf("*p1 = %d, *p2 = %d, *p3 = %d\n\n", *p1, *p2, *p3);

    char *lex = "TMHMA POLITISMIKIS TEXNOLOGIAS KAI EPIKOINONIAS";

    puts(lex);

    puts(lex + 35);

    putchar(*(lex+8));

    int len_str = len(lex);

    printf("\n\nLength of string: %d\n", len_str);

    return 0;
}


int len(char *p)
{
    int counter = 0;

    while (*p != '\0')
    {
        counter++;
        p++;
    }

    return counter;
}
```

**Προσέξτε τα παρακάτω...**

Μια µεταβλητή δείκτη δηλώνεται όπως µία οποιαδήποτε άλλη µεταβλητή, µε τη διαφορά ότι πριν από το όνοµά της πρέπει να υπάρχει ο χαρακτήρας `*`. Π.χ `int a, *b`;

Μέσα σε µια µεταβλητή δείκτη µπορούµε να καταχωρίσουµε µόνο τη διεύθυνση µιας θέσης µνήµης. Π.χ `b = &a` στο δείκτη `b` καταχωρίζεται η διεύθυνση της `a`.

Όταν η µεταβλητή δείκτη `b` περιέχει τη διεύθυνση µιας άλλης µεταβλητής `a`, τότε λέµε ότι ο δείκτης `b` "δείχνει" στη µεταβλητή `a`.

Χρησιµοποιώντας τον τελεστή αναφοράς `*` µπορούµε να έχουµε πρόσβαση µέσω µιας µεταβλητής δείκτη στη θέση στην οποία "δείχνει" η µεταβλητή. Μπορούµε δηλαδή να αναφερθούµε στην `a` µέσω της `b`. Για παράδειγµα, η `*b=5` καταχωρίζει το `5` στη µεταβλητή `a` (το `*b=5` είναι ισοδύναµο µε το `a=5`).

Μία συµβολοσειρά δεν είναι τίποτε άλλο από µια διεύθυνση µνήµης, εποµένως µπορούµε να εκχωρήσουµε µια συµβολοσειρά σε µια µεταβλητή δείκτη π.χ `p="Lesvos";`.

Στη περίπτωση που µια συνάρτηση ορίζεται µετά από τη `main()`, τότε θα πρέπει να δηλωθεί (πρόσθια δήλωση) και πριν από τη `main()`. Στη πρόσθια δήλωση της συνάρτησης αναφέρεται µόνο ο τύπος της το όνοµα της καθώς και οι παράµετροι της. ∆εν υπάρχει το σώµα της συνάρτησης. Η δήλωση τερµατίζεται µε ερωτηµατικό.

## Η χρήση των δεικτών στη C

Στη C δηλώνουµε µια µεταβλητή δείκτη όπως ακριβώς και τις υπόλοιπες
µεταβλητές µε τη διαφορά ότι πριν από το όνοµα της (κολλητά) βάζουµε ένα
αστεράκι (`*`).

Ο παρακάτω κώδικας δηµιουργεί µια κανονική µεταβλητή τύπου `int` (την `a`) και µία µεταβλητή δείκτη (την `b`).

```c
int a, *b;
```

Για να καταχωρήσουµε µέσα σε έναν δείκτη τη διεύθυνση µιας µεταβλητής, χρησιµοποιούµε τον τελεστή `&` (ο οποίος αποδίδει τη διεύθυνση µιας µεταβλητής).

```c
a = 45;
b = &a;
```

Τώρα µπορούµε να πούµε ότι ο δείκτης bδείχνει στην µεταβλητή `a`.

Μπορούµε να έχουµε πρόσβαση σε µια µεταβλητή µέσω ενός δείκτη ο οποίος
δείχνει σε αυτή τη µεταβλητή, µέσω του τελεστή αναφοράς `*`.

Π.χ µε την παράσταση `*b` αναφερόµαστε στη θέση µνήµης στην οποία δείχνει
ο δείκτης `b`.

```c
a = 45;
b = &a;
*b = 100;
```

Ο τελεστής `*` εποµένως χρησιµοποιείται µε τρεις διαφορετικές έννοιες:

- ως σύµβολο του πολλαπλασιασµού
- για τη δήλωση µιας µεταβλητής δείκτη
- για την αναφορά σε µία θέση στην οποία δείχνει ένας δείκτης

Μπορούµε να έχουµε πρόσβαση σε µια µεταβλητή µέσω ενός δείκτη ο οποίος
δείχνει σε αυτή τη µεταβλητή, µέσω του **τελεστή αναφοράς** `*`.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int a, b, *c;
    c = &a;
    a = 25;
    printf("Το a είναι = %d\n", a);
    printf("Το *c είναι = %d\n", *c);
    *c = 44;
    printf("Το a είναι = %d\n", a);
    printf("Το *c είναι = %d\n", *c);
    return 0;
}
```

Το παραπάνω πρόγραμμα θα εμφανίσει στην οθόνη του υπολογιστή μας τα παρακάτω μυνήματα:

```none
Το a είναι=25
Το *c είναι=25
Το a είναι=44
Το *c είναι=44
```

## Δείκτες και Συμβολοσειρές

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *p;
    p = "LESVOS";
    printf(p);
    p++;
    printf(p);
    printf(p + 3);
    return 0;
}
```

H **printf** θα εµφανίζει τους χαρακτήρες **ξεκινώντας** από τη **διεύθυνση** που τις **µεταβιβάζεται** µέχρι να εντοπίσει τον χαρακτήρα τερµατισµού **\0**.

Το παραπάνω πρόγραμμα θα εμφανίσει στην οθόνη του υπολογιστή μας τα παρακάτω αποτελέσματα:

```none
LESVOS
ESVOS
OS
```

Η παρακάτω παράσταση `*p` αναφέρεται στον χαρακτήρα στον οποίο δείχνει ο δείκτης `p`!.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *p;
    p = "LESVOS";
    putch(*p);
    p++;
    putch(*p);
    return 0;
}
```

Το παραπάνω πρόγραμμα θα εμφανίσει στην οθόνη του υπολογιστή μας τα παρακάτω αποτελέσματα:

```none
L
E
```

Στο παρακάτω πρόγραμμα αρχικά αυξάνεται ο δείκτης **p2** µέχρι να δείξει στον χαρακτήρα τερµατισµού **'\0'**. Μετά µειώνεται κατά ένα και δείχνει το **S**. Με τη πρόταση **putch(*p2)** εµφανίζεται στη οθόνη ο χαρακτήρας στον οποίο δείχνει ο δείκτης **p2**! Ο **p2** µειώνεται µέχρι να φτάσει πάλι τον **p1**. Ενδιάµεσα εµφανίζει έναν-έναν τους χαρακτήρες από τον τελευταίο µέχρι τον πρώτο!.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *p1, *p2;
    p1 = p2 = "LESVOS";
    while (*p2 != '\0') p2++;
    p2--;
    while (p2 >= p1) 
    {
        putch(*p2);
        p2--;
    }
    putch('\n');
    return 0;
}
```

Το παραπάνω πρόγραμμα θα εμφανίσει στην οθόνη του υπολογιστή μας τα παρακάτω αποτελέσματα:

```none
SOVSEL
```
