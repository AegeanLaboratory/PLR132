# Εργαστήριο 11

Το εργαστηριακό μάθημα αυτό είναι απο τη σημερινή παρουσίαση (17/05/2021) που μας έκανε ο κ. Νίκος Μ. Χατζηγιαννάκης (Πανεπιστήμιο ΑΙΓΑΙΟΥ). Το περιεχόμενο του 11ου εργαστηρίου είναι το εξής:

- Διαχείριση αρχείων κειμένου
- Εγγραφή και ανάγνωση αρχείων κειμένου

## Άσκηση 11.1 - Ανάγνωση κρυπτογραφημένου αρχείου

Ο συμπιεσμένος φάκελος **joke.zip** που συνοδεύει το εργαστήριο περιέχει το αρχείο **joke.txt** το οποίο περιέχει ένα **κρυπτογραφημένο ανέκδοτο**. Κατεβάστε τον συμπιεσμένο φάκελο και αποθηκεύεστε τον στο φάκελο My Documents. Εξάγετε το
αρχείο **joke.txt** και αποθηκεύεστε το και αυτό στο φάκελο My Documents. Ανοίξτε το αρχείο με το σημειωματάριο να δείτε τι έχει μέσα.

### Βήμα 1

- Κρυπτογράφηση του αρχείου είναι πολύ απλή. Αντί για τον κανονικό χαρακτήρα στο αρχείο έχει γραφεί ο επόμενος. Π.χ αντί για a γράφηκε b αντί για d το e κ.ο.κ Γενικά στο αρχείο γράφηκε ο χαρακτήρας με κωδικό τον αμέσως επόμενο (+1) από αυτόν που θα έπρεπε να γραφεί!
- Να γραφεί πρόγραμμα **lab11_1.c** το οποίο θα ανοίγει το αρχείο **joke.txt**, και θα εμφανίζει τα περιεχόμενα του στην οθόνη αποκρυπτογραφημένα. **ΠΡΟΣΟΧΗ** να αποθηκεύστε το πηγαίο αρχείο lab11_1.c στον ίδιο φάκελο που βρίσκεται το **joke.txt**, και μετά μεταγλωττίστε και εκτελέστε το πρόγραμμα.

```c
#include <stdio.h>

int main()
{
    FILE *joke;
    char ch;

    joke = fopen("joke.txt", "r");

    if(joke==NULL) exit(2);
    while(ch!=EOF)
    {
        ch = fgetc(joke);
        putchar(ch-1);
    }

    fclose(joke);

    return 0;
}
```

## Άσκηση 11.2 - Εγγραφή των στοιχείων σας σε αρχείο

Αντικείμενο της άσκησης 11.2 είναι η εγγραφή και η ανάγνωση των προσωπικών σας στοιχείων σε αρχείο!

### Βήμα 1

- Να γραφεί πρόγραμμα **lab11_2.c** το οποίο θα εγγράφει τα προσωπικά σας στοιχεία σε ένα **αρχείο κειμένου** με όνομα **info.txt**.
- Στη **πρώτη** γραμμή θα πρέπει να εγγραφεί το **ονοματεπώνυμο** σας
(σε greeklish)
- Στη **δεύτερη** γραμμή θα πρέπει να εγγραφεί ο **κωδικός** σας (ct...)
- Στη **τρίτη** γραμμή η **ηλικία** σας
- Στη **τέταρτη** γραμμή το **βάρος** και το **ύψος** σας
- Μόλις εγγραφούν τα στοιχεία θα πρέπει να **κλείσετε** το αρχείο
- **Εκτελέστε** το πρόγραμμα σας και ελέγξτε αν **δημιουργήθηκε** το
αρχείο info.txt. Ανοίξτε το με το **σημειωματάριο** (notepad)

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp;

    fp=fopen("info.txt","w");
    fputs("Yoda\n",fp);
    fputs("CT20000\n",fp);
    fprintf(fp,"19\n39 1.54");
    fclose(fp);
    return 0;
}
```

### Βήμα 2

Στη συνέχεια του προγράμματος να ανοίγει πάλι το αρχείο info.txt για ανάγνωση. Να διαβάζει τα στοιχεία (ονοματεπώνυμο,κωδικό,ηλικία,βάρος και ύψος) που βρίσκονται στο αρχείο και να τα εμφανίζει στην οθόνη. Προσθέστε στο πρόγραμμα τις κατάλληλες δηλώσεις μεταβλητών και πινάκων
που χρειάζονται για την αποθήκευση των στοιχείων που θα αναγνωστούν.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp;

    int age;
    float b,y;
    char onom[30],code[10];

    fp=fopen("info.txt","w");

    fputs("Yoda\n",fp);
    fputs("CT20000\n",fp);
    fprintf(fp,"19\n85 1.82");

    fclose(fp);

    fp=fopen("info.txt","r");

    fgets(onom,30,fp);
    fgets(code,10,fp);
    fscanf(fp,"%d %f %f",&age,&b,&y);
    printf("%s\n",onom);
    printf("%s\n",code);
    printf("%d\n%f %f\n",age,b,y);

    fclose(fp);
    return 0;
}
```

## Άσκηση 11.3 - Εγγραφή μορφοποιημένων στοιχείων σε αρχείο

Αντικείμενο της άσκησης 11.3 είναι η εγγραφή σε αρχείο των αποτελεσμάτων μιας εξεταστικής 5 φοιτητών σε 4 μαθήματα. Ακόλουθα ζητείται η ανάγνωση των στοιχείων.

### Βήμα 1

- Να γραφεί πρόγραμμα **lab11_3α.c** το οποίο θα ζητάει να πληκτρολογήσουμε το ονοματεπώνυμο ενός φοιτητή καθώς και τους 4 βαθμούς του. Τόσο το ονοματεπώνυμο όσο και τους βαθμούς θα πρέπει να τους **εγγράφει** σε ένα **αρχείο κειμένου** με όνομα **apot.txt**.
- Η διαδικασία αυτή θα πρέπει να επαναλαμβάνεται για **5** φοιτητές.
- Η **γραμμογράφηση** του αρχείου φαίνεται παρακάτω:

```c
TEMPELAS NIKOLAOS
4 5.5 6 2
ARAXTH MARIA
3 2.5 2 2
MPAROBIOS IOANNHS
4 4 1.5 5
.....
.....
```

- Μόλις εγγραφούν τα στοιχεία και των 5 φοιτητών θα πρέπει να **κλείσετε** το αρχείο apot.txt.
- **Εκτελέστε** το πρόγραμμα σας και **ελέγξτε** αν δημιουργήθηκε το αρχείο apot.txt. **Ανοίξτε** το με το **σημειωματάριο** (notepad).


```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp;

    int i;
    float b1,b2,b3,b4;
    char onom[30];

    fp=fopen("apot.txt","w");

    for (i=1;i<=5;i++)
    {
        gets(onom);
        fputs(onom,fp);
        scanf("%f %f %f %f",&b1,&b2,&b3,&b4);
        fflush(stdin);             
        fprintf(fp,"\n%f %f %f %f\n",b1,b2,b3,b4);
    }

    fclose(fp);
    return 0;
}
```

### Βήμα 2

Να γραφεί **ΝΕΟ** πρόγραμμα **lab11_3b.c** το οποίο θα ανοίγει το αρχείο κειμένου **apot.txt** θα διαβάζει τα ονόματα και τους βαθμούς των 5 φοιτητών και θα τα εμφανίζει στην οθόνη.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp;

    int i;
    float b1,b2,b3,b4;
    char onom[30];

    fp=fopen("apot.txt","r");

    for (i=1;i<=5;i++)
    {
        fgets(onom,30,fp);
        printf("%s",onom);
        fscanf(fp,"%f %f %f %f ",&b1,&b2,&b3,&b4);
        printf("%f %f %f %f\n",b1,b2,b3,b4);
    }

    fclose(fp);
    return 0;
}
```

### Βήμα 3

Τροποποιήστε το πρόγραμμα **lab11_3b.c** ώστε να διαβάζει και να εμφανίζει τα στοιχεία του αρχείου ανεξαρτήτως του πλήθους των φοιτητών. Δηλαδή **χωρίς** να γνωρίζουμε το πλήθος των φοιτητών των οποίων τα στοιχεία είναι καταγεγραμμένα στο αρχείο **apot.txt**.

```c
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp;

    int i;
    float b1,b2,b3,b4;
    char onom[30];

    fp=fopen("apot.txt","r");

    while(!feof(fp))
    {
        fgets(onom,30,fp);
        printf("%s",onom);
        fscanf(fp,"%f %f %f %f ",&b1,&b2,&b3,&b4);
        printf("%f %f %f %f\n",b1,b2,b3,b4);
    }
    fclose(fp);

    return 0;
}
```
